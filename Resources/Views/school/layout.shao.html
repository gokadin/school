<!DOCTYPE html>
<html>
<head>
    <title>School</title>
    <meta http-equiv="Content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta id="csrf-token" content="{{ \Library\Facades\Session::generateToken() }}">
    <!-- <link rel="shortcut icon" href="/images/favicon.ico" > -->
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="{{ asset('css/responsive.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/default.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/school.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('css/bundle.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('js/semantic.min.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('js/semantic-modules.min.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset('js/jquery.webui-popover.css') }}" type="text/css" />
    @yield('styles')
</head>

@inject('\Library\Facades\Sentry')
@inject('\Library\Facades\Session')
@inject('\Library\Facades\Router')

<body>
<div class="header navbar">
    <div class="header-inner">
        <nav role="navigation" class="navbar navbar-inverse nav-top">
            <div class="navbar-header">
                <a href="javascript:;" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a href="@path('School.Common/Index.index')" class="navbar-brand">{{ Sentry::user()->school()->name }}</a>
            </div>
            <div id="navbarCollapse" class="collapse navbar-collapse">
                <form role="search" class="navbar-form navbar-left nav-top-search">
                    <div class="form-group search">
                        <input type="text" placeholder="Search" class="form-control">
                        <span class="fa fa-search"></span>
                    </div>
                </form>
                <ul class="nav navbar-nav navbar-right">
                    @if (Sentry::is('Teacher'))
                        {{{ $trialDaysLeft = Sentry::user()->subscription()->trialDaysLeft(); }}}
                        @if ($trialDaysLeft > 0)
                        <li>
                            <a class="top-nav-subscription" href="@path('School#Teacher/Account#subscription')">
                                ({{ $trialDaysLeft }} days left)
                            </a>
                        </li>
                        @endif
                    @endif
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img class="profile-picture-small" src="{{ Sentry::user()->profile_picture }}" />
                            {{ Sentry::user()->name() }}&nbsp;<b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="@path('school.teacher.account.index')">My Account</a></li>
                            <li><a href="#">Settings</a></li>
                            <li class="divider"></li>
                            <li><a href="@path('frontend.account.logout')">Log out</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
</div>
<div class="clearfix"></div>
<div class="container-fluid">
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse">
            <ul class="page-sidebar-menu" data-slide-speed="200">
                <li class="sidebar-toggler-wrapper">
                    <div class="sidebar-toggler hidden-phone"></div>
                </li>
                <li class="start @if (Router::currentNameContains('teacher.index.index')) active @endif">
                    <a href="@path('school.teacher.index.index')">
                        <i class="fa fa-home"></i>
                        <span class="title">Home</span>
                        @if (Router::currentNameContains('teacher.index'))
                        <span class="selected"></span>
                        @endif
                    </a>
                </li>
                <li>
                    <a href="javascript:;">
                        <i class="fa fa-university"></i>
                        <span class="title">School</span>
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                        <li>
                            <a href="#">About</a>
                        </li>
                        <li>
                            <a href="#">Blog</a>
                        </li>
                    </ul>
                </li>
                <li class="@if (Router::currentNameContains('teacher.messaging')) != false) active @endif">
                    <a href="@path('school.common.messaging.index')">
                        <i class="fa fa-envelope"></i>
                        <span class="title">Messaging</span>
                        @if (Router::currentNameContains('teacher.messaging'))
                        <span class="selected"></span>
                        @endif
                    </a>
                </li>
                <li class="@if (Router::currentNameContains('teacher.activity')) active @endif">
                    <a href="javascript:;">
                        <i class="fa fa-gear"></i>
                        <span class="title">Activities</span>
                        @if (Router::currentNameContains('teacher.activity'))
                        <span class="selected"></span>
                        @endif
                        <span class="arrow"></span>
                    </a>
                    <ul class="sub-menu">
                        <li @if (Router::currentNameContains('teacher.activity.index')) class="active" @endif>
                        <a href="@path('school.teacher.activity.index')">
                            <span class="title">View activities</span>
                        </a>
                </li>
                <li @if (Router::currentNameContains('teacher.activity.create')) class="active" @endif>
                <a href="@path('school.teacher.activity.create')">
                    <span class="title">Add an activity</span>
                </a>
                </li>
            </ul>
            </li>
            <li class="@if (Router::currentNameContains('teacher.student')) active @endif">
                <a href="javascript:;">
                    <i class="fa fa-group"></i>
                    <span class="title">Students</span>
                    @if (Router::currentNameContains('teacher.student'))
                    <span class="selected"></span>
                    @endif
                    <span class="arrow"></span>
                </a>
                <ul class="sub-menu">
                    <li @if (Router::currentNameContains('teacher.student.index')) class="active" @endif>
                    <a href="@path('school.teacher.student.index')">View students</a>
            </li>
            <li @if (Router::currentNameContains('teacher.student.create')) class="active" @endif>
            <a href="@path('school.teacher.student.create')">Add a student</a>
            </li>
            </ul>
            </li>
            <li class="@if (Router::currentNameContains('teacher.calendar')) active @endif">
                <a href="@path('school.teacher.calendar.index')">
                    <i class="fa fa-calendar"></i>
                    <span class="title">Calendar</span>
                    @if (Router::currentNameContains('teacher.calendar'))
                    <span class="selected"></span>
                    @endif
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <i class="fa fa-archive"></i>
                    <span class="title">Inventory</span>
                    <span class="arrow"></span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="#">Example</a>
                    </li>
                    <li>
                        <a href="#">Example</a>
                    </li>
                </ul>
            </li>
            <li class="@if (Router::currentNameContains('teacher.payment')) active @endif">
                <a href="javascript:;">
                    <i class="fa fa-money"></i>
                    <span class="title">Payments</span>
                    <span class="arrow"></span>
                </a>
                <ul class="sub-menu">
                    <li @if (Router::currentNameContains('teacher.payment.index')) class="active" @endif>
                    <a href="@path('school.teacher.payment.index')">Stripe test</a>
            </li>
            <li>
                <a href="#">Example</a>
            </li>
            </ul>
            </li>
            <li>
                <a href="javascript:;">
                    <i class="fa fa-file-text-o"></i>
                    <span class="title">Reports</span>
                    <span class="arrow"></span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="#">Example</a>
                    </li>
                    <li>
                        <a href="#">Example</a>
                    </li>
                </ul>
            </li>
            <li class="@if (Router::currentNameContains('teacher.account')) active @endif">
                <a href="@path('school.teacher.account.index')">
                    <i class="fa fa-user"></i>
                    <span class="title">My Account</span>
                    @if (Router::currentNameContains('teacher.account'))
                    <span class="selected"></span>
                    @endif
                </a>
            </li>
            <li class="last @if (Router::currentNameContains('teacher.settings')) active @endif">
                <a href="#">
                    <i class="fa fa-cogs"></i>
                    <span class="title">Settings</span>
                </a>
            </li>
            </ul>
        </div>
        <div class="page-content-wrapper">
            <div class="page-content">
                <div class="row">
                    <div class="col-md-12">
                        <h3 class="page-title">
                            Home
                        </h3>
                        <ul class="page-breadcrumb breadcrumb">
                            Home
                        </ul>
                    </div>
                </div>
                <div class="row content">
                    <div class="col-md-12">
                        @if (Session::hasFlash())
                        <div id="flash" class="active {{ Session::getFlashType() }}">
                            {{ Session::getFlash() }}
                                <span>
                                    <button class="flash-close" onclick="closeFlash()">X</button>
                                </span>
                        </div>
                        @endif
                    </div>
                    <div id="content" class="col-md-12">
                        @yield('content')
                        {{{ $vueComponent = 'schoolTeacherPayment'; }}}
                        <component is="{{ $vueComponent }}"></component>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="footer">

</div>

<script src="https://code.jquery.com/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="{{ asset('js/validator.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/app2.js') }}"></script>
<script src="{{ asset('js/bundle.js') }}"></script>

@yield('scripts')

<script>
    jQuery(document).ready(function() {
        App.init();
    });

    $(function() {
        var flashDuration = parseInt('{{ Session::getFlashDuration() }}');

        if (flashDuration == 0) {
            return;
        }

        setTimeout(closeFlash, flashDuration * 1000);
    });

    function closeFlash() {
        $('#flash').fadeOut('fast', function() {
            $('#flash').removeClass('active');
        });
    }
</script>

</body>
</html>
