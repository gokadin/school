@layout('school.layout')

@inject('\Library\Http\Form')

@section('content')

<div class="main-title">
    Students
</div>

<div class="content-padding">
    @if ($user->settings()->showTips())
        <info-box>
            <p>
                We will send an invitation email once you add the new student,
                who will then complete a form to register to your school.
            </p>
            <a href="@path('school.teacher.setting.registrationForm')">Customize your form</a>
        </info-box>
    @endif

    <div class="panel-1">
        {!! $form->open('school.teacher.student.preRegister', 'POST', ['id' => 'create-student-form', 'class' => 'form-1']) !!}

        <div class="form-title">
            Add a new student
        </div>

        <div class="form-row">
            {!! $form->label('firstName', 'First name') !!}
            {!! $form->text('firstName', null, ['placeholder' => 'First name (optional)']) !!}
            {!! $form->error('firstName') !!}
        </div>

        <div class="form-row">
            {!! $form->label('lastName', 'Last name') !!}
            {!! $form->text('lastName', null, ['placeholder' => 'Last name (optional)']) !!}
            {!! $form->error('lastName') !!}
        </div>

        <div class="form-row">
            {!! $form->label('email', 'Email') !!}
            {!! $form->text('email', null, ['placeholder' => 'Email']) !!}
            {!! $form->error('email') !!}
        </div>

        <div class="form-row">
            {!! $form->label('activity', 'Activity') !!}
            <select id="activityId" name="activityId">
                @foreach ($activities as $activity)
                    <option value="{{ $activity->getId() }}">{{ $activity->name() }}</option>
                @endforeach
            </select>
        </div>

        <div class="form-buttons">
            <label for="create-another">
                <input type="checkbox" id="create-another" name="createAnother" value="1" />
                Add another
            </label>

            {!! $form->submit('Send invitation') !!}
        </div>

        {!! $form->close() !!}
    </div>
</div>

@stop()

@section('javascript')

<script type="text/javascript">
    $('#create-student-form').validate({
        email: [
            {rule: 'required', message: 'email is required'},
            {rule: 'email', message: 'must be a valid email'}
        ]
    });
</script>

@stop()