@inject('\Library\Facades\Form')

@layout('school.layout')

@section('content')

<script id="create-template" type="x-template">
    <div class="form-1 create-student-form">

        {{ Form::open('', 'POST', ['id' => 'create-student-form']) }}

        <div class="form-1-header">
            Register student
        </div>

        <div class="form-1-body">

            <div class="form-1-row">
                {{ Form::label('firstName', 'First name', ['class' => 'required']) }}
                {{ Form::text('firstName', null, ['placeholder' => 'First name']) }}
                {{ Form::error('firstName') }}
            </div>

            <div class="form-1-row">
                {{ Form::label('lastName', 'Last name', ['class' => 'required']) }}
                {{ Form::text('lastName', null, ['placeholder' => 'Last name']) }}
                {{ Form::error('lastName') }}
            </div>

            <div class="form-1-row">
                {{ Form::label('email', 'Email', ['class' => 'required']) }}
                {{ Form::text('email', null, ['placeholder' => 'Email']) }}
                {{ Form::error('email') }}
            </div>

            <div class="form-1-row">
                {{ Form::label('activity', 'Activity', ['class' => 'required']) }}
                <span class="student-form-activity">
                    <select name="activity" v-model="selectedActivity" v-on="change: selectedActivityChanged">
                        <option v-repeat="activity: activities" value="@{{ activity.id }}">@{{ activity.name }}</option>
                    </select>
                </span>
                <span class="student-form-rate">
                    <label class="required">Rate</label>
                    {{ Form::text('rate', null, ['placeholder' => 'Rate', 'v-model' => 'rate']) }}
                    {{ Form::error('rate') }}
                </span>
            </div>

        </div>

        <div class="form-1-footer">

            <span class="form-1-create-another">
                <label>
                    Create another
                    <input type="checkbox" name="createAnother" value="1" />
                </label>
            </span>

            <span class="form-1-cancel">
                <a href="@path('school.teacher.student.index')">
                    {{ Form::button('Cancel', ['type' => 'button']) }}
                </a>
            </span>

            <span class="form-1-submit">
                {{ Form::button('Register', ['type' => 'submit']) }}
            </span>

        </div>

        {{ Form::close() }}

    </div>
</script>

<script type="text/javascript">
    var activities = JSON.parse('{{ $activities }}');
</script>

@stop()

@section('scripts')

<script type="text/javascript">
    $('#create-student-form').validate({
        firstName: [
            {rule: 'required', message: 'first name is required'}
        ],
        lastName: [
            {rule: 'required', message: 'last name is required'}
        ],
        email: [
            {rule: 'required'},
            {rule: 'email'},
            {rule: 'unique:Teacher,email'},
            {rule: 'unique:Student,email'},
            {rule: 'unique:TempTeacher,email'}
        ],
        rate: [
            {rule: 'required'},
            {rule: 'numeric'}
        ]
    })
</script>

@stop()